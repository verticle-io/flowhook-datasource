/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","react","@grafana/ui","rxjs","@grafana/runtime"],(function(e,t,n,o,r){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=53)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var o=n(11),r=n(30),i=n(31),s=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):i(e)}},function(e,t,n){var o=n(12),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=o},function(e,t,n){var o;"undefined"!=typeof self&&self,o=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}({"./src/byte.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BYTE={LF:"\n",NULL:"\0"}},"./src/client.ts":function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{a(o.next(e))}catch(e){i(e)}}function c(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((o=o.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n("./src/stomp-handler.ts"),s=n("./src/versions.ts"),c=n("./src/web-socket-state.ts"),a=function(){function e(e){void 0===e&&(e={}),this.stompVersions=s.Versions.default,this.reconnectDelay=5e3,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8192,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this._active=!1;var t=function(){};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}return Object.defineProperty(e.prototype,"webSocket",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disconnectHeaders",{get:function(){return this._disconnectHeaders},set:function(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return!!this._stompHandler&&this._stompHandler.connected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedVersion",{get:function(){return this._stompHandler?this._stompHandler.connectedVersion:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.configure=function(e){Object.assign(this,e)},e.prototype.activate=function(){this._active=!0,this._connect()},e.prototype._connect=function(){return o(this,void 0,void 0,(function(){var e=this;return r(this,(function(t){switch(t.label){case 0:return this.connected?(this.debug("STOMP: already connected, nothing to do"),[2]):[4,this.beforeConnect()];case 1:return t.sent(),this._active?(this.debug("Opening Web Socket..."),this._webSocket=this._createWebSocket(),this._stompHandler=new i.StompHandler(this,this._webSocket,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,onConnect:function(t){if(!e._active)return e.debug("STOMP got connected while deactivate was issued, will disconnect now"),void e._disposeStompHandler();e.onConnect(t)},onDisconnect:function(t){e.onDisconnect(t)},onStompError:function(t){e.onStompError(t)},onWebSocketClose:function(t){e.onWebSocketClose(t),e._active&&e._schedule_reconnect()},onWebSocketError:function(t){e.onWebSocketError(t)},onUnhandledMessage:function(t){e.onUnhandledMessage(t)},onUnhandledReceipt:function(t){e.onUnhandledReceipt(t)},onUnhandledFrame:function(t){e.onUnhandledFrame(t)}}),this._stompHandler.start(),[2]):(this.debug("Client has been marked inactive, will not attempt to connect"),[2])}}))}))},e.prototype._createWebSocket=function(){var e;return(e=this.webSocketFactory?this.webSocketFactory():new WebSocket(this.brokerURL,this.stompVersions.protocolVersions())).binaryType="arraybuffer",e},e.prototype._schedule_reconnect=function(){var e=this;this.reconnectDelay>0&&(this.debug("STOMP: scheduling reconnection in "+this.reconnectDelay+"ms"),this._reconnector=setTimeout((function(){e._connect()}),this.reconnectDelay))},e.prototype.deactivate=function(){this._active=!1,this._reconnector&&clearTimeout(this._reconnector),this._disposeStompHandler()},e.prototype.forceDisconnect=function(){this._webSocket&&(this._webSocket.readyState!==c.WebSocketState.CONNECTING&&this._webSocket.readyState!==c.WebSocketState.OPEN||this._stompHandler._closeWebsocket())},e.prototype._disposeStompHandler=function(){this._stompHandler&&(this._stompHandler.dispose(),this._stompHandler=null)},e.prototype.publish=function(e){this._stompHandler.publish(e)},e.prototype.watchForReceipt=function(e,t){this._stompHandler.watchForReceipt(e,t)},e.prototype.subscribe=function(e,t,n){return void 0===n&&(n={}),this._stompHandler.subscribe(e,t,n)},e.prototype.unsubscribe=function(e,t){void 0===t&&(t={}),this._stompHandler.unsubscribe(e,t)},e.prototype.begin=function(e){return this._stompHandler.begin(e)},e.prototype.commit=function(e){this._stompHandler.commit(e)},e.prototype.abort=function(e){this._stompHandler.abort(e)},e.prototype.ack=function(e,t,n){void 0===n&&(n={}),this._stompHandler.ack(e,t,n)},e.prototype.nack=function(e,t,n){void 0===n&&(n={}),this._stompHandler.nack(e,t,n)},e}();t.Client=a},"./src/compatibility/compat-client.ts":function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./src/client.ts"),s=n("./src/compatibility/heartbeat-info.ts"),c=function(e){function t(t){var n=e.call(this)||this;return n.maxWebSocketFrameSize=16384,n._heartbeatInfo=new s.HeartbeatInfo(n),n.reconnect_delay=0,n.webSocketFactory=t,n.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},n}return r(t,e),t.prototype._parseConnect=function(){for(var e,t,n,o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];var i={};if(o.length<2)throw new Error("Connect requires at least 2 arguments");if("function"==typeof o[1])i=o[0],t=o[1],n=o[2],e=o[3];else switch(o.length){case 6:i.login=o[0],i.passcode=o[1],t=o[2],n=o[3],e=o[4],i.host=o[5];break;default:i.login=o[0],i.passcode=o[1],t=o[2],n=o[3],e=o[4]}return[i,t,n,e]},t.prototype.connect=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=this._parseConnect.apply(this,t);o[0]&&(this.connectHeaders=o[0]),o[1]&&(this.onConnect=o[1]),o[2]&&(this.onStompError=o[2]),o[3]&&(this.onWebSocketClose=o[3]),e.prototype.activate.call(this)},t.prototype.disconnect=function(t,n){void 0===n&&(n={}),t&&(this.onDisconnect=t),this.disconnectHeaders=n,e.prototype.deactivate.call(this)},t.prototype.send=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n="");var o=!1===(t=Object.assign({},t))["content-length"];o&&delete t["content-length"],this.publish({destination:e,headers:t,body:n,skipContentLengthHeader:o})},Object.defineProperty(t.prototype,"reconnect_delay",{set:function(e){this.reconnectDelay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ws",{get:function(){return this._webSocket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this.connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onreceive",{get:function(){return this.onUnhandledMessage},set:function(e){this.onUnhandledMessage=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onreceipt",{get:function(){return this.onUnhandledReceipt},set:function(e){this.onUnhandledReceipt=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heartbeat",{get:function(){return this._heartbeatInfo},set:function(e){this.heartbeatIncoming=e.incoming,this.heartbeatOutgoing=e.outgoing},enumerable:!0,configurable:!0}),t}(i.Client);t.CompatClient=c},"./src/compatibility/heartbeat-info.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.client=e}return Object.defineProperty(e.prototype,"outgoing",{get:function(){return this.client.heartbeatOutgoing},set:function(e){this.client.heartbeatOutgoing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incoming",{get:function(){return this.client.heartbeatIncoming},set:function(e){this.client.heartbeatIncoming=e},enumerable:!0,configurable:!0}),e}();t.HeartbeatInfo=o},"./src/compatibility/stomp.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/versions.ts"),r=n("./src/compatibility/compat-client.ts"),i=function(){function e(){}return e.client=function(t,n){return null==n&&(n=o.Versions.default.protocolVersions()),new r.CompatClient((function(){return new(e.WebSocketClass||WebSocket)(t,n)}))},e.over=function(e){var t;return"function"==typeof e?t=e:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),t=function(){return e}),new r.CompatClient(t)},e.WebSocketClass=null,e}();t.Stomp=i},"./src/frame-impl.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/byte.ts"),r=function(){function e(e){var t=e.command,n=e.headers,o=e.body,r=e.binaryBody,i=e.escapeHeaderValues,s=e.skipContentLengthHeader;this.command=t,this.headers=Object.assign({},n||{}),r?(this._binaryBody=r,this.isBinaryBody=!0):(this._body=o||"",this.isBinaryBody=!1),this.escapeHeaderValues=i||!1,this.skipContentLengthHeader=s||!1}return Object.defineProperty(e.prototype,"body",{get:function(){return!this._body&&this.isBinaryBody&&(this._body=(new TextDecoder).decode(this._binaryBody)),this._body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){return this._binaryBody||this.isBinaryBody||(this._binaryBody=(new TextEncoder).encode(this._body)),this._binaryBody},enumerable:!0,configurable:!0}),e.fromRawFrame=function(t,n){for(var o={},r=function(e){return e.replace(/^\s+|\s+$/g,"")},i=0,s=t.headers.reverse();i<s.length;i++){var c=s[i],a=(c.indexOf(":"),r(c[0])),u=r(c[1]);n&&"CONNECT"!==t.command&&"CONNECTED"!==t.command&&(u=e.hdrValueUnEscape(u)),o[a]=u}return new e({command:t.command,headers:o,binaryBody:t.binaryBody,escapeHeaderValues:n})},e.prototype.toString=function(){return this.serializeCmdAndHeaders()},e.prototype.serialize=function(){var t=this.serializeCmdAndHeaders();return this.isBinaryBody?e.toUnit8Array(t,this._binaryBody).buffer:t+this._body+o.BYTE.NULL},e.prototype.serializeCmdAndHeaders=function(){var t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(var n=0,r=Object.keys(this.headers||{});n<r.length;n++){var i=r[n],s=this.headers[i];this.escapeHeaderValues&&"CONNECT"!==this.command&&"CONNECTED"!==this.command?t.push(i+":"+e.hdrValueEscape(""+s)):t.push(i+":"+s)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push("content-length:"+this.bodyLength()),t.join(o.BYTE.LF)+o.BYTE.LF+o.BYTE.LF},e.prototype.isBodyEmpty=function(){return 0===this.bodyLength()},e.prototype.bodyLength=function(){var e=this.binaryBody;return e?e.length:0},e.sizeOfUTF8=function(e){return e?(new TextEncoder).encode(e).length:0},e.toUnit8Array=function(e,t){var n=(new TextEncoder).encode(e),o=new Uint8Array([0]),r=new Uint8Array(n.length+t.length+o.length);return r.set(n),r.set(t,n.length),r.set(o,n.length+t.length),r},e.marshall=function(t){return new e(t).serialize()},e.hdrValueEscape=function(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")},e.hdrValueUnEscape=function(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,"\n").replace(/\\c/g,":").replace(/\\\\/g,"\\")},e}();t.FrameImpl=r},"./src/index.ts":function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n("./src/client.ts")),o(n("./src/frame-impl.ts")),o(n("./src/parser.ts")),o(n("./src/stomp-config.ts")),o(n("./src/stomp-headers.ts")),o(n("./src/stomp-subscription.ts")),o(n("./src/versions.ts")),o(n("./src/web-socket-state.ts")),o(n("./src/compatibility/compat-client.ts")),o(n("./src/compatibility/stomp.ts"))},"./src/parser.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}return e.prototype.parseChunk=function(e,t){var n;if(void 0===t&&(t=!1),n=e instanceof ArrayBuffer?new Uint8Array(e):this._encoder.encode(e),t&&0!==n[n.length-1]){var o=new Uint8Array(n.length+1);o.set(n,0),o[n.length]=0,n=o}for(var r=0;r<n.length;r++){var i=n[r];this._onByte(i)}},e.prototype._collectFrame=function(e){0!==e&&13!==e&&(10!==e?(this._onByte=this._collectCommand,this._reinjectByte(e)):this.onIncomingPing())},e.prototype._collectCommand=function(e){if(13!==e)return 10===e?(this._results.command=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaders)):void this._consumeByte(e)},e.prototype._collectHeaders=function(e){13!==e&&(10!==e?(this._onByte=this._collectHeaderKey,this._reinjectByte(e)):this._setupCollectBody())},e.prototype._reinjectByte=function(e){this._onByte(e)},e.prototype._collectHeaderKey=function(e){if(58===e)return this._headerKey=this._consumeTokenAsUTF8(),void(this._onByte=this._collectHeaderValue);this._consumeByte(e)},e.prototype._collectHeaderValue=function(e){if(13!==e)return 10===e?(this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,void(this._onByte=this._collectHeaders)):void this._consumeByte(e)},e.prototype._setupCollectBody=function(){var e=this._results.headers.filter((function(e){return"content-length"===e[0]}))[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated},e.prototype._collectBodyNullTerminated=function(e){0!==e?this._consumeByte(e):this._retrievedBody()},e.prototype._collectBodyFixedSize=function(e){0!=this._bodyBytesRemaining--?this._consumeByte(e):this._retrievedBody()},e.prototype._retrievedBody=function(){this._results.binaryBody=this._consumeTokenAsRaw(),this.onFrame(this._results),this._initState()},e.prototype._consumeByte=function(e){this._token.push(e)},e.prototype._consumeTokenAsUTF8=function(){return this._decoder.decode(this._consumeTokenAsRaw())},e.prototype._consumeTokenAsRaw=function(){var e=new Uint8Array(this._token);return this._token=[],e},e.prototype._initState=function(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame},e}();t.Parser=o},"./src/stomp-config.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.StompConfig=o},"./src/stomp-handler.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/byte.ts"),r=n("./src/frame-impl.ts"),i=n("./src/parser.ts"),s=n("./src/versions.ts"),c=n("./src/web-socket-state.ts"),a=function(){function e(e,t,n){var o=this;void 0===n&&(n={}),this._client=e,this._webSocket=t,this._serverFrameHandlers={CONNECTED:function(e){o.debug("connected to server "+e.headers.server),o._connected=!0,o._connectedVersion=e.headers.version,o._connectedVersion===s.Versions.V1_2&&(o._escapeHeaderValues=!0),o._setupHeartbeat(e.headers),o.onConnect(e)},MESSAGE:function(e){var t=e.headers.subscription,n=o._subscriptions[t]||o.onUnhandledMessage,r=e,i=o,c=o._connectedVersion===s.Versions.V1_2?r.headers.ack:r.headers["message-id"];r.ack=function(e){return void 0===e&&(e={}),i.ack(c,t,e)},r.nack=function(e){return void 0===e&&(e={}),i.nack(c,t,e)},n(r)},RECEIPT:function(e){var t=o._receiptWatchers[e.headers["receipt-id"]];t?(t(e),delete o._receiptWatchers[e.headers["receipt-id"]]):o.onUnhandledReceipt(e)},ERROR:function(e){o.onStompError(e)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.configure(n)}return Object.defineProperty(e.prototype,"connectedVersion",{get:function(){return this._connectedVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connected",{get:function(){return this._connected},enumerable:!0,configurable:!0}),e.prototype.configure=function(e){Object.assign(this,e)},e.prototype.start=function(){var e=this,t=new i.Parser((function(t){var n=r.FrameImpl.fromRawFrame(t,e._escapeHeaderValues);e.logRawCommunication||e.debug("<<< "+n),(e._serverFrameHandlers[n.command]||e.onUnhandledFrame)(n)}),(function(){e.debug("<<< PONG")}));this._webSocket.onmessage=function(n){if(e.debug("Received data"),e._lastServerActivityTS=Date.now(),e.logRawCommunication){var o=n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;e.debug("<<< "+o)}t.parseChunk(n.data,e.appendMissingNULLonIncoming)},this._webSocket.onclose=function(t){e.debug("Connection closed to "+e._webSocket.url),e.onWebSocketClose(t),e._cleanUp()},this._webSocket.onerror=function(t){e.onWebSocketError(t)},this._webSocket.onopen=function(){var t=Object.assign({},e.connectHeaders);e.debug("Web Socket Opened..."),t["accept-version"]=e.stompVersions.supportedVersions(),t["heart-beat"]=[e.heartbeatOutgoing,e.heartbeatIncoming].join(","),e._transmit({command:"CONNECT",headers:t})}},e.prototype._setupHeartbeat=function(e){var t=this;if((e.version===s.Versions.V1_1||e.version===s.Versions.V1_2)&&e["heart-beat"]){var n=e["heart-beat"].split(",").map((function(e){return parseInt(e,10)})),r=n[0],i=n[1];if(0!==this.heartbeatOutgoing&&0!==i){var a=Math.max(this.heartbeatOutgoing,i);this.debug("send PING every "+a+"ms"),this._pinger=setInterval((function(){t._webSocket.readyState===c.WebSocketState.OPEN&&(t._webSocket.send(o.BYTE.LF),t.debug(">>> PING"))}),a)}if(0!==this.heartbeatIncoming&&0!==r){var u=Math.max(this.heartbeatIncoming,r);this.debug("check PONG every "+u+"ms"),this._ponger=setInterval((function(){var e=Date.now()-t._lastServerActivityTS;e>2*u&&(t.debug("did not receive server activity for the last "+e+"ms"),t._closeWebsocket())}),u)}}},e.prototype._closeWebsocket=function(){this._webSocket.onmessage=function(){},this._webSocket.close()},e.prototype._transmit=function(e){var t=e.command,n=e.headers,o=e.body,i=e.binaryBody,s=e.skipContentLengthHeader,c=new r.FrameImpl({command:t,headers:n,body:o,binaryBody:i,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:s}),a=c.serialize();if(this.logRawCommunication?this.debug(">>> "+a):this.debug(">>> "+c),this.forceBinaryWSFrames&&"string"==typeof a&&(a=(new TextEncoder).encode(a)),"string"==typeof a&&this.splitLargeFrames)for(var u=a;u.length>0;){var l=u.substring(0,this.maxWebSocketChunkSize);u=u.substring(this.maxWebSocketChunkSize),this._webSocket.send(l),this.debug("chunk sent = "+l.length+", remaining = "+u.length)}else this._webSocket.send(a)},e.prototype.dispose=function(){var e=this;if(this.connected)try{var t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt="close-"+this._counter++),this.watchForReceipt(t.receipt,(function(t){e._closeWebsocket(),e._cleanUp(),e.onDisconnect(t)})),this._transmit({command:"DISCONNECT",headers:t})}catch(e){this.debug("Ignoring error during disconnect "+e)}else this._webSocket.readyState!==c.WebSocketState.CONNECTING&&this._webSocket.readyState!==c.WebSocketState.OPEN||this._closeWebsocket()},e.prototype._cleanUp=function(){this._connected=!1,this._pinger&&clearInterval(this._pinger),this._ponger&&clearInterval(this._ponger)},e.prototype.publish=function(e){var t=e.destination,n=e.headers,o=e.body,r=e.binaryBody,i=e.skipContentLengthHeader,s=Object.assign({destination:t},n);this._transmit({command:"SEND",headers:s,body:o,binaryBody:r,skipContentLengthHeader:i})},e.prototype.watchForReceipt=function(e,t){this._receiptWatchers[e]=t},e.prototype.subscribe=function(e,t,n){void 0===n&&(n={}),(n=Object.assign({},n)).id||(n.id="sub-"+this._counter++),n.destination=e,this._subscriptions[n.id]=t,this._transmit({command:"SUBSCRIBE",headers:n});var o=this;return{id:n.id,unsubscribe:function(e){return o.unsubscribe(n.id,e)}}},e.prototype.unsubscribe=function(e,t){void 0===t&&(t={}),t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})},e.prototype.begin=function(e){var t=e||"tx-"+this._counter++;this._transmit({command:"BEGIN",headers:{transaction:t}});var n=this;return{id:t,commit:function(){n.commit(t)},abort:function(){n.abort(t)}}},e.prototype.commit=function(e){this._transmit({command:"COMMIT",headers:{transaction:e}})},e.prototype.abort=function(e){this._transmit({command:"ABORT",headers:{transaction:e}})},e.prototype.ack=function(e,t,n){void 0===n&&(n={}),n=Object.assign({},n),this._connectedVersion===s.Versions.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"ACK",headers:n})},e.prototype.nack=function(e,t,n){return void 0===n&&(n={}),n=Object.assign({},n),this._connectedVersion===s.Versions.V1_2?n.id=e:n["message-id"]=e,n.subscription=t,this._transmit({command:"NACK",headers:n})},e}();t.StompHandler=a},"./src/stomp-headers.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.StompHeaders=o},"./src/stomp-subscription.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){};t.StompSubscription=o},"./src/versions.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.versions=e}return e.prototype.supportedVersions=function(){return this.versions.join(",")},e.prototype.protocolVersions=function(){return this.versions.map((function(e){return"v"+e.replace(".","")+".stomp"}))},e.V1_0="1.0",e.V1_1="1.1",e.V1_2="1.2",e.default=new e([e.V1_0,e.V1_1,e.V1_2]),e}();t.Versions=o},"./src/web-socket-state.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(t.WebSocketState||(t.WebSocketState={}))},0:function(e,t,n){e.exports=n("./src/index.ts")}})},e.exports=o()},function(e,t){e.exports=function(e){return e}},function(e,t,n){var o=n(4),r=n(3);e.exports=function(e){if(!r(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var o=n(5).Symbol;e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(29))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var o=n(10),r=n(15);e.exports=function(e){return null!=e&&r(e.length)&&!o(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=r},function(e,t,n){var o=n(20),r=n(13),i=n(37),s=n(38),c=Object.prototype,a=c.hasOwnProperty,u=o((function(e,t){e=Object(e);var n=-1,o=t.length,u=o>2?t[2]:void 0;for(u&&i(t[0],t[1],u)&&(o=1);++n<o;)for(var l=t[n],p=s(l),d=-1,f=p.length;++d<f;){var h=p[d],y=e[h];(void 0===y||r(y,c[h])&&!a.call(e,h))&&(e[h]=l[h])}return e}));e.exports=u},function(e,t,n){var o=n(9),r=n(21),i=n(23);e.exports=function(e,t){return i(r(e,t,o),e+"")}},function(e,t,n){var o=n(22),r=Math.max;e.exports=function(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,c=r(i.length-t,0),a=Array(c);++s<c;)a[s]=i[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=i[s];return u[t]=n(a),o(e,this,u)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var o=n(24),r=n(36)(o);e.exports=r},function(e,t,n){var o=n(25),r=n(26),i=n(9),s=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:i;e.exports=s},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var o=n(27),r=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t,n){var o=n(28),r=n(35);e.exports=function(e,t){var n=r(e,t);return o(n)?n:void 0}},function(e,t,n){var o=n(10),r=n(32),i=n(3),s=n(34),c=/^\[object .+?Constructor\]$/,a=Function.prototype,u=Object.prototype,l=a.toString,p=u.hasOwnProperty,d=RegExp("^"+l.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||r(e))&&(o(e)?d:c).test(s(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var o=n(11),r=Object.prototype,i=r.hasOwnProperty,s=r.toString,c=o?o.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var o=!0}catch(e){}var r=s.call(e);return o&&(t?e[c]=n:delete e[c]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var o,r=n(33),i=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";e.exports=function(e){return!!i&&i in e}},function(e,t,n){var o=n(5)["__core-js_shared__"];e.exports=o},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,o=0;return function(){var r=n(),i=16-(r-o);if(o=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var o=n(13),r=n(14),i=n(16),s=n(3);e.exports=function(e,t,n){if(!s(n))return!1;var c=typeof t;return!!("number"==c?r(n)&&i(t,n.length):"string"==c&&t in n)&&o(n[t],e)}},function(e,t,n){var o=n(39),r=n(50),i=n(14);e.exports=function(e){return i(e)?o(e,!0):r(e)}},function(e,t,n){var o=n(40),r=n(41),i=n(43),s=n(44),c=n(16),a=n(46),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&r(e),p=!n&&!l&&s(e),d=!n&&!l&&!p&&a(e),f=n||l||p||d,h=f?o(e.length,String):[],y=h.length;for(var b in e)!t&&!u.call(e,b)||f&&("length"==b||p&&("offset"==b||"parent"==b)||d&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||c(b,y))||h.push(b);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}},function(e,t,n){var o=n(42),r=n(6),i=Object.prototype,s=i.hasOwnProperty,c=i.propertyIsEnumerable,a=o(function(){return arguments}())?o:function(e){return r(e)&&s.call(e,"callee")&&!c.call(e,"callee")};e.exports=a},function(e,t,n){var o=n(4),r=n(6);e.exports=function(e){return r(e)&&"[object Arguments]"==o(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var o=n(5),r=n(45),i=t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=s&&s.exports===i?o.Buffer:void 0,a=(c?c.isBuffer:void 0)||r;e.exports=a}).call(this,n(17)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var o=n(47),r=n(48),i=n(49),s=i&&i.isTypedArray,c=s?r(s):o;e.exports=c},function(e,t,n){var o=n(4),r=n(15),i=n(6),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&r(e.length)&&!!s[o(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var o=n(12),r=t&&!t.nodeType&&t,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===r&&o.process,c=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=c}).call(this,n(17)(e))},function(e,t,n){var o=n(3),r=n(51),i=n(52),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return i(e);var t=r(e),n=[];for(var c in e)("constructor"!=c||!t&&s.call(e,c))&&n.push(c);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){"use strict";n.r(t);var o=n(0),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function c(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{a(o.next(e))}catch(e){i(e)}}function c(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}a((o=o.apply(e,t||[])).next())}))}function a(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}var p=n(7),d=n(18),f=n(8),h=function(e){function t(t){var n=e.call(this,t)||this;return n.instanceSettings=t,n.baseUrl=t.url,n}return t.$inject=["instanceSettings"],i(t,e),t.prototype._request=function(e,t){var n=""+this.instanceSettings.url+e+("".length?"?":""),o=s(s({},t),{url:n});return console.log("request",n,o),Object(d.getBackendSrv)().fetch(o)},t.prototype.query=function(e){var t,n,o=[];try{for(var r=u(e.targets),i=r.next();!i.done;i=r.next()){var s=i.value;s.hide||o.push(this.runLogsStream(s,s,e))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return p.merge.apply(void 0,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(o))},t.prototype.runLogsStream=function(e,t,n){var r=this;return new p.Observable((function(i){var s=n.maxDataPoints||1e3,c=new o.CircularDataFrame({append:"tail",capacity:s});c.refId=e.refId,c.name=e.alias||"Logs "+e.refId,c.addField({name:"line",type:o.FieldType.string}).labels={cat:"",ident:""},c.addField({name:"event",type:o.FieldType.string}).labels={cat:"",ident:""},c.addField({name:"time",type:o.FieldType.time}),c.addField({name:"cat",type:o.FieldType.string}),c.addField({name:"ident",type:o.FieldType.string}),c.addField({name:"status",type:o.FieldType.string}),c.addField({name:"message",type:o.FieldType.string}),c.addField({name:"meta",type:o.FieldType.other}),c.addField({name:"level",type:o.FieldType.string}),c.addField({name:"id",type:o.FieldType.string}),c.meta={preferredVisualisationType:"logs"},console.log("q",t);var a,u="logs-"+n.panelId+"-"+e.refId,l=r,p=r.getStompConfig(l.instanceSettings.jsonData,(function(e){a.subscribe("/topic/"+l.instanceSettings.jsonData.flowhook,(function(e){var t=JSON.parse(e.body);l.appendData(c,t),i.next({data:[c],key:u})}))}));(a=new f.Client(p)).activate()}))},t.prototype.getStompConfig=function(e,t){return{connectHeaders:{login:""+(e.brokerUsername||"guest"),passcode:""+(e.brokerPassword||"guest")},brokerURL:""+(e.brokerUrl||"wss://flowhook.herokuapp.com/ws"),debug:function(e){console.log("STOMP: "+e)},reconnectDelay:200,onConnect:t}},t.prototype.appendData=function(e,t){var n,o,r="";(null===(n=t.messagePropertySection)||void 0===n?void 0:n.length)>0&&(null===(o=t.messagePropertySection)||void 0===o||o.forEach((function(e){var t;r+=e.name+": ",null===(t=e.messageProperties)||void 0===t||t.forEach((function(e){r+=" "+e.name+" = "+e.value})),r+="\n"}))),e.add({time:t.created?t.created:new Date(t.time),line:"["+t.category+"]["+t.ident+"] "+t.event,event:t.event,cat:t.category,ident:t.ident,status:t.status,level:this.getLogLevel(t.status),message:t.message,id:t.uuid,meta:r}),e.meta={notices:[{severity:t.status,text:t.status}],preferredVisualisationType:"logs"}},t.prototype.getLogLevel=function(e){switch(e){case"error":return o.LogLevel.error;case"warn":return o.LogLevel.warn;case"success":return o.LogLevel.info;case"info":return o.LogLevel.notice}return o.LogLevel.unknown},t.prototype.testDatasource=function(){return c(this,void 0,Promise,(function(){var e,t,n;return a(this,(function(o){return t=this,n=this.getStompConfig(t.instanceSettings.jsonData,(function(e){console.log("test connection ...")})),[2,new Promise((function(t,o){e=new f.Client(n),console.log("stompClient",e),e.activate(),e.onConnect=function(n){console.log("test connection ... done"),e.connected?t({status:"success",message:"Successfully connected Flowhook service"}):t({status:"error",message:"Failed to connect to Flowhook service"}),e.deactivate()}}))]}))}))},t}(o.DataSourceApi),y=n(1),b=n.n(y),m=n(2),g=m.LegacyForms.SecretFormField,v=m.LegacyForms.FormField,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onFlowhookChange=function(e){var n=t.props,o=n.onOptionsChange,r=n.options,i=s(s({},r.jsonData),{flowhook:e.target.value});o(s(s({},r),{jsonData:i}))},t.onBrokerUrlChange=function(e){var n=t.props,o=n.onOptionsChange,r=n.options,i=s(s({},r.jsonData),{brokerUrl:e.target.value});o(s(s({},r),{jsonData:i}))},t.onUsernameChange=function(e){var n=t.props,o=n.onOptionsChange,r=n.options,i=s(s({},r.jsonData),{brokerUsername:e.target.value});o(s(s({},r),{jsonData:i}))},t.onResetUsername=function(){var e=t.props,n=e.onOptionsChange,o=e.options;n(s(s({},o),{secureJsonFields:s(s({},o.secureJsonFields),{username:!1}),secureJsonData:s(s({},o.secureJsonData),{username:""})}))},t.onPasswordChange=function(e){var n=t.props,o=n.onOptionsChange,r=n.options,i=s(s({},r.jsonData),{brokerPassword:e.target.value});o(s(s({},r),{jsonData:i}))},t.onResetPassword=function(){var e=t.props,n=e.onOptionsChange,o=e.options;n(s(s({},o),{secureJsonFields:s(s({},o.secureJsonFields),{password:!1}),secureJsonData:s(s({},o.secureJsonData),{password:""})}))},t}return i(t,e),t.prototype.render=function(){var e=this.props.options,t=e.jsonData,n=e.secureJsonFields;return b.a.createElement("div",{className:"gf-form-group"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(v,{label:"Flowhook",labelWidth:6,inputWidth:20,onChange:this.onFlowhookChange,value:t.flowhook||"",placeholder:"json field returned to frontend"})),b.a.createElement("div",{className:"gf-form"},b.a.createElement(v,{label:"BrokerURL",labelWidth:6,inputWidth:20,onChange:this.onBrokerUrlChange,value:t.brokerUrl||"wss://flowhook.herokuapp.com/ws",placeholder:"wss://flowhook.herokuapp.com/ws"})),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(v,{value:t.brokerUsername||"guest",label:"Username",placeholder:"broker user",labelWidth:6,inputWidth:20,onReset:this.onResetUsername,onChange:this.onUsernameChange})),b.a.createElement("div",{className:"gf-form"},b.a.createElement(g,{isConfigured:n&&n.password,value:t.brokerPassword||"guest",label:"Password",placeholder:"broker pass",labelWidth:6,inputWidth:20,onReset:this.onResetPassword,onChange:this.onPasswordChange}))))},t}(y.PureComponent),w=n(19),S=n.n(w),k={flowhook:"none"},O=m.LegacyForms.FormField,j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onQueryTextChange=function(e){var n=t.props,o=n.onChange,r=n.query;o(s(s({},r),{queryText:e.target.value}))},t.onConstantChange=function(e){var n=t.props,o=n.onChange,r=n.query,i=n.onRunQuery;o(s({},r)),i()},t}return i(t,e),t.prototype.render=function(){var e=S()(this.props.query,k).queryText;return b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(O,{labelWidth:8,value:e||"",onChange:this.onQueryTextChange,label:"Query Text",tooltip:"Not used yet"})))},t}(y.PureComponent);n.d(t,"plugin",(function(){return C}));var C=new o.DataSourcePlugin(h).setConfigEditor(_).setQueryEditor(j)}])}));
//# sourceMappingURL=module.js.map